<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ck-multiselect-grid demo</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 2rem;
      }
      .demo-row {
        display: grid;
        gap: 1rem;
        max-width: 720px;
      }
      input,
      textarea {
        width: 100%;
        padding: 0.5rem;
      }
      textarea {
        min-height: 4.5rem;
        font-family: monospace;
      }

      ck-multiselect-grid {
        --input-border: #d0d5dd;
        --card-bg: #ffffff;
        --surface-bg: #eef2ff;
        --primary-color: #4338ca;
        --focus-border: #4338ca;
        --focus-shadow: 0 0 0 2px rgba(67, 56, 202, 0.2);
        --option-pill-color: #0f172a;
        --option-pill-active-bg: #4338ca;
        --text-light: #ffffff;
        --form-bg: #e2e8f0;
      }
    </style>
  </head>
  <body>
    <h1>ck-multiselect-grid demo</h1>
    <p>
      Tip: Values listed in <code>selectedItems</code> are rendered even if they are missing
      from <code>availableItems</code>. Try removing "Scope.PolicyOnly" from the available list and
      notice the pill stays visible.
    </p>

    <div class="demo-row">
      <ck-multiselect-grid
        id="grid"
        title="Select Resource Scopes"
        description="Choose which resource scopes this client is allowed to request."
        fieldset-id="scopes-fieldset"
        fieldset-class="scope-block"
        availableItems='["Scope.Read","Scope.Write","Scope.Manage"]'
        selectedItems='["Scope.Write","Scope.PolicyOnly"]'
      ></ck-multiselect-grid>

      <label>
        Title
        <input id="title" value="Select Resource Scopes" />
      </label>

      <label>
        Description
        <input
          id="description"
          value="Choose which resource scopes this client is allowed to request."
        />
      </label>

      <label>
        Fieldset ID
        <input id="fieldset-id" value="scopes-fieldset" />
      </label>

      <label>
        Fieldset Classes (space-delimited)
        <input id="fieldset-class" value="scope-block" />
      </label>

      <label>
        Available Items (JSON array)
        <textarea id="available-items">["Scope.Read","Scope.Write","Scope.Manage"]</textarea>
      </label>

      <label>
        Selected Items (JSON array)
        <textarea id="selected-items">["Scope.Write","Scope.PolicyOnly"]</textarea>
      </label>
    </div>

    <script type="module">
      // Requires a build output (run `npm run build` first)
      import '../dist/ck-multiselect-grid/ck-multiselect-grid.esm.js';

      const grid = document.getElementById('grid');
      const titleInput = document.getElementById('title');
      const descriptionInput = document.getElementById('description');
      const fieldsetIdInput = document.getElementById('fieldset-id');
      const fieldsetClassInput = document.getElementById('fieldset-class');
      const availableItemsInput = document.getElementById('available-items');
      const selectedItemsInput = document.getElementById('selected-items');

      const sync = () => {
        grid.setAttribute('title', titleInput.value);
        grid.setAttribute('description', descriptionInput.value);
        grid.setAttribute('fieldset-id', fieldsetIdInput.value || 'scopes-fieldset');

        const nextClass = fieldsetClassInput.value.trim();
        if (nextClass) {
          grid.setAttribute('fieldset-class', nextClass);
        } else {
          grid.removeAttribute('fieldset-class');
        }

        const nextAvailable = availableItemsInput.value.trim();
        if (nextAvailable) {
          grid.setAttribute('availableItems', nextAvailable);
        } else {
          grid.removeAttribute('availableItems');
        }

        const nextSelected = selectedItemsInput.value.trim();
        if (nextSelected) {
          grid.setAttribute('selectedItems', nextSelected);
        } else {
          grid.removeAttribute('selectedItems');
        }
      };

      titleInput.addEventListener('input', sync);
      descriptionInput.addEventListener('input', sync);
      fieldsetIdInput.addEventListener('input', sync);
      fieldsetClassInput.addEventListener('input', sync);
      availableItemsInput.addEventListener('input', sync);
      selectedItemsInput.addEventListener('input', sync);
    </script>
  </body>
</html>
